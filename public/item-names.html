<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>All Item Names â€¢ Inventory</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background: #378b96; }
    .wrap { max-width: 700px; margin: 40px auto; background: #95beeb; border-radius: 16px; box-shadow: 0 2px 16px #0002; padding: 28px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="d-flex justify-content-between align-items-center">
      <h3 class="mb-3">All Item Names</h3>
      <a href="index.html" class="btn btn-outline-secondary">Back</a>
    </div>

    <div id="msg" class="alert alert-info py-2 d-none"></div>
    <ul id="nameList" class="list-group"></ul>
  </div>

  <script>
    const token = localStorage.getItem('token');

    async function loadNames() {
      const msg = document.getElementById('msg');
      const list = document.getElementById('nameList');
      list.innerHTML = '';

      if (!token) {
        msg.classList.remove('d-none');
        msg.textContent = 'You are not logged in. Please go back and log in.';
        return;
      }

      try {
        const res = await fetch('/items/names', { headers: { Authorization: 'Bearer ' + token } });
        if (!res.ok) {
          const data = await res.json().catch(() => ({}));
          throw new Error(data.error || ('Request failed: ' + res.status));
        }
        const names = await res.json(); // unique, sorted
        if (!names.length) {
          msg.classList.remove('d-none');
          msg.textContent = 'No items yet.';
          return;
        }
        names.forEach(n => {
          const li = document.createElement('li');
          li.className = 'list-group-item';
          li.textContent = n;
          list.appendChild(li);
        });
      } catch (e) {
        msg.classList.remove('d-none');
        msg.classList.replace('alert-info', 'alert-danger');
        msg.textContent = e.message || 'Something went wrong.';
      }
    }

    loadNames();
  </script>
</body>
</html>
